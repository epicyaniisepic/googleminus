<!DOCTYPE html>
<html ng-app="myApp">
<head>
  <title>Google Minus</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="http://localhost:3000/external/bootstrap.min.css">
  <script src="http://localhost:3000/external/jquery.min.js"></script>
  <script src="http://localhost:3000/external/bootstrap.min.js"></script>
  <script src="http://localhost:3000/external/angular.min.js"></script>
  <script>
     var myApp = angular.module('myApp', [])
   
 	 myApp.controller('SignUpController', ['$scope', '$http', function($scope, $http) {
       $scope.signup = function(uEmail, uLname, uFname, uMinit, uPword) {
       	var userInfo = {
			email: uEmail,
			lastname: uLname,
			firstname: uFname,
			middleinit: uMinit,
			password: uPword
		};
		var jsonString = JSON.stringify(userInfo, null, 2);
       	$http.get("http://localhost:3000/signup/" + jsonString)
       	.then(function(response) {
       		if (response.data == false) {
       			alert("Sorry, email address already exists.");
       			window.location.href = "http://localhost:3000/sign"
       		}
       		else {
       			alert(response.data);
       			window.location.href = "http://localhost:3000/dummySearch";
       		}
       	})
       }
    }])

 	 myApp.controller('SignInController', ['$scope', '$http', function($scope, $http) {
       $scope.signin = function(uEmail, uPword) {
       	var userInfo = {
			email: uEmail,
			password: uPword
		};
		var jsonString = JSON.stringify(userInfo, null, 2);
       	$http.get("http://localhost:3000/signin/" + jsonString)
       	.then(function(response) {
       		if (response.data == false) {
                alert("User not found.");
                window.location.href = "http://localhost:3000/sign";
             }
              else {
                alert(response.data);
                window.location.href = "http://localhost:3000/feeds";
              }
   		})
       }
    }])


  </script>
</head>
<body>
	<h1>Google Minus</h1><br>
	<h2>Sign Up</h2><br><br>
	<div ng-app="myApp" ng-controller="SignUpController">
		<label>Email: </label>
		<input type="text" ng-model="email" placeholder="Enter email"><br>
		<label>Last Name: </label>
		<input type="text" ng-model="lname" placeholder="Enter last name">
		<label>First Name: </label>
		<input type="text" ng-model="fname" placeholder="Enter first name">
		<label>Middle Initial: </label>
		<input type="text" ng-model="minit" placeholder="Enter middle initial"><br>
		<label>Password: </label>
		<input type="password" ng-model="pword" placeholder="Enter password"><br><br>
		<button ng-click="signup(email,lname,fname,minit,pword)">Register</button>
	</div>
	<br><br>
	<h2>Sign In</h2><br><br>
	<div ng-app="myApp" ng-controller="SignInController">
		<label>Email: </label>
		<input type="text" ng-model="email2" placeholder="Enter email"><br>
		<label>Password: </label>
		<input type="password" ng-model="pword2" placeholder="Enter password"><br><br>
		<button ng-click="signin(email2,pword2)">Sign in</button>
	</div>
</html>
